<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Register – The Good Research Project</title>
  <meta name="description" content="Create an account to access mentorship services at The Good Research Project." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="register.css" />
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script src="config.js"></script>

 
</head>
<body>
  <!-- Header -->
  <header class="site-header" id="top">
    <div class="container header-inner">
      <a href="index.html#top" class="brand">
        <img src="Logo.png" alt="Open Frontiers logo" class="brand-logo">
      </a>
      <nav class="nav" aria-label="Primary">
        <button class="nav-toggle" aria-expanded="false" aria-controls="navMenu" aria-label="Open menu">
          <span class="bar"></span><span class="bar"></span><span class="bar"></span>
        </button>
        <ul id="navMenu" class="nav-list">
          <li><a href="index.html#home">Home</a></li>
          <li><a href="index.html#about">About</a></li>
          <li class="has-sub">
            <button class="sub-toggle" aria-expanded="false">Courses</button>
                       <ul class="sub-menu">
    <li><a href="courseIntro.html">Introduction to Research & Publication</a></li>
    <li><a href="case.html">Case Report</a></li>
    <li><a href="Network.html">Network Metanalysis</a></li>
    <li><a href="OriginalResearch.html">Original Research (Web-based)</a></li>
    <li><a href="Research.html">USMLE / PLAB / AMC Aspirants</a></li>
    <li><a href="Mentor.html">Thesis</a></li>
    <li><a href="narrative.html">Narrative Review Article</a></li>
    <li><a href="LOE.html">Letter to Editor</a></li>
    <li><a href="conference.html">Conference Presentation</a></li>
  </ul>
          </li>
          <li><a href="index.html#testimonials">Testimonials</a></li>
          <li><a href="index.html#success">Success Stories</a></li>
          <li><a href="index.html#volunteer">Volunteer Tasks</a></li>
          <li><a href="login.html" class="btn btn-accent">Login</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="section">
    <div class="container">
      <p class="eyebrow">Account</p>
      <h1>Create your account</h1>
      <p class="helper">Register to access mentorship resources, manage your cart, and track payments.</p>

      <form id="registerForm" class="form-wrap form-grid" novalidate>
        <div>
          <label class="f-label" for="regName">Full Name</label>
          <input id="regName" name="name" class="f-input" type="text" placeholder="Enter your full name" required />
        </div>

        <div>
          <label class="f-label" for="regEmail">Email</label>
          <input id="regEmail" name="email" class="f-input" type="email" placeholder="you@example.com" required />
        </div>

        <div class="row">
          <div>
            <label class="f-label" for="regRole">Role</label>
            <select id="regRole" name="role" class="f-select" required>
              <option value="">Select role</option>
              <option value="student">Student</option>
              <option value="professional">Professional</option>
            </select>
          </div>
          <div>
            <label class="f-label" for="regPassword">Password</label>
            <input id="regPassword" name="password" class="f-input" type="password" placeholder="Create a password" minlength="6" required />
          </div>
        </div>

        <button class="btn btn-primary" type="submit" class = "button12">Register</button>
        <p class="note">Already have an account? <a class="link" href="login.html">Login</a></p>
      </form>
    </div>
  </main>

  <!-- Contact / Footer -->
<footer id="contact" class="site-footer">
  <div class="container footer-top">
    
    <!-- Brand & Social -->
    <div class="footer-col brand-col">
      <a href="#top" class="footer-logo">
        <img src="Logo.png" alt="Open Frontiers logo" style="width: 100px;"/>
      </a>
      <div class="footer-social">
        <a href="https://instagram.com/" aria-label="Instagram" target="_blank" rel="noopener" class="soc soc-ig"></a>
        <a href="https://linkedin.com/" aria-label="LinkedIn" target="_blank" rel="noopener" class="soc soc-li"></a>
      </div>
    </div>


    <!-- Explore Links -->
    <div class="footer-col nav-col">
      <h4>Explore</h4>
      <ul class="footer-list">
        <li><a href="index.html"><span class="chev">›</span> Home</a></li>
        <li><a href="about.html"><span class="chev">›</span> About Us</a></li>
        <li><a href="contact.html"><span class="chev">›</span> Contact</a></li>
      </ul>
    </div>

    <!-- Quick Links -->
    <div class="footer-col links-col">
      <h4>Quick Links</h4>
      <ul class="footer-list">
        <li><a href="privacy.html"><span class="chev">›</span> Privacy Policy</a></li>
        <li><a href="refund.html"><span class="chev">›</span> Cancellation and Refund Policy</a></li>
        <li><a href="terms.html"><span class="chev">›</span> Terms &amp; Conditions</a></li>
        <li><a href="shipping.html"><span class="chev">›</span> Shipping Policy</a></li>
      </ul>
    </div>

    <!-- Contact Info -->
    <div class="footer-col contact-col">
      <h4>Contact Info</h4>
      <ul class="footer-list contact-list">
        <li>
          <span class="fi fi-phone"></span>
          <a href="tel:+919075231153">+91-90752 31153</a>
        </li>
        <li>
          <span class="fi fi-mail"></span>
          <a href="mailto:info@thegoodresearchproject.com">info@thegoodresearchproject.com</a>
        </li>
        <li>
          <span class="fi fi-pin"></span>
          Civil Lines, Nagpur 440001, Maharashtra
        </li>
      </ul>
    </div>

  </div>

  <!-- Footer Bottom -->
  <div class="container footer-bottom">
    <div class="fb-left">
      <small>© <span id="year"></span> Open Frontiers. All Rights Reserved</small>
    </div>
    <div class="fb-right">
      <small>
        Designed &amp; developed by
        <a href="https://justglobal.in" target="_blank" rel="noopener">Open Frontiers</a>
      </small>
    </div>
  </div>

</footer>

  <!-- Sticky WhatsApp -->
  <a class="wa-float" href="https://wa.me/+919075231153" target="_blank" rel="noopener" aria-label="WhatsApp us">
    <span class="wa-ic"></span>
    <span class="wa-text">WhatsApp us</span>
  </a>

  <script>
    // Year
    document.getElementById('year').innerText = new Date().getFullYear();

    // Mobile nav
    const navToggle = document.querySelector('.nav-toggle');
    const navList = document.getElementById('navMenu');
    if (navToggle && navList) {
      navToggle.addEventListener('click', () => {
        const open = navList.classList.toggle('open');
        navToggle.setAttribute('aria-expanded', open);
      });
    }

    // Simple registration using localStorage (demo only)
    document.addEventListener('DOMContentLoaded', () => {
      function fromBase64(str) {
  return atob(str);
}
  // Initialize Supabase client if not already initialized
  const SUPABASE_URL = fromBase64(window.SUPABASE_URL_B64);
  const SUPABASE_ANON_KEY = fromBase64(window.SUPABASE_ANON_KEY_B64);
  const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  const regForm = document.getElementById('registerForm');
  regForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const name = document.getElementById('regName').value.trim();
    const email = document.getElementById('regEmail').value.trim().toLowerCase();
    const role = document.getElementById('regRole').value;
    const password = document.getElementById('regPassword').value;

    if (!name || !email || !role || !password) {
      alert('Please fill all fields.');
      return;
    }

    try {
      // First, check if email already exists in Supabase
      let { data: existingUsers, error: existErr } = await supabaseClient
        .from('app_users')
        .select('email')
        .eq('email', email);

      if (existErr) throw existErr;
      if (existingUsers.length > 0) {
        alert('Email already registered. Please login.');
        window.location.href = 'login.html';
        return;
      }
      if (name.toLowerCase() === 'admin' || role === 'admin') {
  alert('Registration as admin is not allowed.');
  return; // Prevents further processing!
}
// Otherwise, proceed with inserting into table


      // Insert new user into app_users table
      const { error: insertErr } = await supabaseClient
        .from('app_users')
        .insert([{ name, email, role, password }]);

      if (insertErr) throw insertErr;

      alert('Registration successful! Please login.');
      window.location.href = 'login.html';
    } catch (err) {
      alert('Registration failed: ' + err.message);
    }
  });
});

  </script>
</body>
</html>
